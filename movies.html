<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movies - Stream Hub</title>

<style>
body{
    margin:0;
    background:#000;
    font-family:Arial;
    color:white;
}

/* LOADER */
#loader{
    position:fixed;
    inset:0;
    background:black;
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:5000;
    transition:0.4s;
}
.spinner{
    width:46px;
    height:46px;
    border:4px solid rgba(255,255,255,0.2);
    border-top:4px solid #e50914;
    border-radius:50%;
    animation:spin 0.8s linear infinite;
}
.loading-text{
    margin-top:12px;
    font-size:13px;
    letter-spacing:2px;
    opacity:0.85;
    text-align:center;
}
@keyframes spin{
    from{ transform:rotate(0deg); }
    to{ transform:rotate(360deg); }
}
#loader.hide{
    opacity:0;
    pointer-events:none;
}

/* HEADER */
.header{
    padding:15px;
    font-size:22px;
    font-weight:bold;
    color:#e50914;
    text-align:center;
}

/* SEARCH */
.search-box{ padding:15px; }
.search-box input{
    width:100%;
    padding:10px;
    border:none;
    border-radius:6px;
    font-size:16px;
}

/* GENRES */
.genres{ padding:10px; text-align:center; }
.genres button{
    margin:5px;
    padding:8px 14px;
    border:none;
    border-radius:20px;
    background:#222;
    color:white;
    cursor:pointer;
}
.genres button:hover{ background:#e50914; }

/* GRID */
.grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:15px;
    padding:15px;
}

.card{
    background:#111;
    border-radius:10px;
    overflow:hidden;
    cursor:pointer;
    transition:0.3s;
}
.card:hover{ transform:scale(1.05); }

.card img{
    width:100%;
    height:200px;
    object-fit:cover;
}

.card-content{ padding:10px; }
.rating{ font-size:14px; color:gold; }

/* NOTICE BOARD */
.notice{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    background:#111;
    border:1px solid #e50914;
    padding:18px 22px;
    border-radius:12px;
    z-index:6000;
    width:90%;
    max-width:380px;
    text-align:center;
    box-shadow:0 0 25px rgba(229,9,20,0.45);
    animation:popIn .25s ease;
}

.notice-title{
    color:#e50914;
    font-weight:bold;
    margin-bottom:10px;
    font-size:18px;
}

.notice button{
    margin-top:12px;
    padding:7px 16px;
    border:none;
    border-radius:20px;
    background:#e50914;
    color:white;
    cursor:pointer;
    font-weight:bold;
}

.timer{
    margin-top:8px;
    font-size:12px;
    color:#aaa;
}

@keyframes popIn{
    from{ opacity:0; transform:translate(-50%, -50%) scale(0.9); }
    to{ opacity:1; transform:translate(-50%, -50%) scale(1); }
}
</style>
</head>

<body>

<!-- LOADER -->
<div id="loader">
    <div style="text-align:center">
        <div class="spinner"></div>
        <div class="loading-text">LOADING MOVIES...</div>
    </div>
</div>

<!-- NOTICE -->
<div class="notice" id="noticeBox">
    <div class="notice-title">NOTICE</div>
    <div>
        මෙහි MOVIE COLLECTION පමණක් ලබා දේ<br><br>
        Example: Harry Potter Collection / Marvel Collection
    </div>
    <div class="timer" id="timerText">Closing in 10s</div>
    <button onclick="closeNotice()">OK</button>
</div>

<div class="header">MOVIES</div>

<div class="search-box">
    <input type="text" id="search" placeholder="Search movies...">
</div>

<div class="genres">
    <button onclick="filterGenre('all')">All</button>
    <button onclick="filterGenre('fantasy')">Fantasy</button>
    <button onclick="filterGenre('action')">Action</button>
</div>

<div class="grid">

<div class="card" data-genre="fantasy" data-title="Harry Potter Collection"
     onclick="goDetails('Harry Potter Collection')">
<img src="https://picsum.photos/300/400?1">
<div class="card-content">
<h3>Harry Potter Collection</h3>
<div class="rating">⭐ Fantasy</div>
</div>
</div>

<div class="card" data-genre="action" data-title="Marvel Collection"
     onclick="goDetails('Marvel Collection')">
<img src="https://picsum.photos/300/400?2">
<div class="card-content">
<h3>Marvel Collection</h3>
<div class="rating">⭐ Action</div>
</div>
</div>

</div>

<script>

/* LOADER */
window.addEventListener("load", ()=>{
    document.getElementById("loader").classList.add("hide");
});

/* DETAILS */
function goDetails(title){
    window.location.href =
        "moviedetails.html?title=" + encodeURIComponent(title);
}

/* SEARCH */
const searchInput = document.getElementById("search");
const cards = document.querySelectorAll(".card");

searchInput.addEventListener("keyup", function(){
    const value = this.value.toLowerCase();

    cards.forEach(card=>{
        const title = card.dataset.title.toLowerCase();
        card.style.display = title.includes(value) ? "block" : "none";
    });
});

/* GENRE FILTER */
function filterGenre(genre){
    cards.forEach(card=>{
        const g = card.dataset.genre;
        card.style.display =
            (genre === "all" || g === genre) ? "block" : "none";
    });
}

/* NOTICE TIMER */
let seconds = 10;
const timerText = document.getElementById("timerText");
const noticeBox = document.getElementById("noticeBox");

const countdown = setInterval(()=>{
    seconds--;
    timerText.innerText = "Closing in " + seconds + "s";

    if(seconds <= 0){
        closeNotice();
    }
},1000);

function closeNotice(){
    noticeBox.style.display = "none";
    clearInterval(countdown);
}

</script>

</body>
</html>